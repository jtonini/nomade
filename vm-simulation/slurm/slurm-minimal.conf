# NOMADE Simulation - Minimal Cluster
# 1 CPU node for quick testing and CI/CD
#
# Totals: 1 node | 64 cores | 0 GPUs | 512 GB RAM

ClusterName=nomade-minimal
SlurmctldHost=nomade-test

# Scheduling
SchedulerType=sched/backfill
SelectType=select/cons_tres
SelectTypeParameters=CR_Core_Memory

# Logging
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdLogFile=/var/log/slurm/slurmd.log
SlurmctldPidFile=/run/slurmctld.pid
SlurmdPidFile=/run/slurmd.pid

# Directories
StateSaveLocation=/var/spool/slurm/ctld
SlurmdSpoolDir=/var/spool/slurm/d

# Users
SlurmUser=slurm
SlurmdUser=root

# Timeouts
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=0
MinJobAge=300
KillWait=30
Waittime=0

# Authentication
AuthType=auth/munge
CryptoType=crypto/munge

# Accounting (optional but useful)
AccountingStorageType=accounting_storage/none
JobAcctGatherType=jobacct_gather/none

#------------------------------------------------------------------------------
# Node Definitions
#------------------------------------------------------------------------------

# Single CPU node (matches VM resources for actual job execution)
NodeName=nomade-test CPUs=4 RealMemory=7937 State=UNKNOWN

#------------------------------------------------------------------------------
# Partitions
#------------------------------------------------------------------------------

PartitionName=standard Nodes=nomade-test Default=YES MaxTime=7-00:00:00 State=UP
PartitionName=debug    Nodes=nomade-test MaxTime=4:00:00 DefaultTime=1:00:00 State=UP
